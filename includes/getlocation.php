<form style="width:580px;height:auto;">
<fieldset class="gllpLatlonPicker">
</br>
<input type="text" class="gllpSearchField" placeholder="Location Name">
<input type="button" class="gllpSearchButton button-primary" value="search">
<select class="gllpZoom" name="gmap_iconizer_zoom_level" id="">
<option value="19">Map Zoom Level 19</option>
<option value="18">Map Zoom Level 18</option>
<option value="17">Map Zoom Level 17</option>
<option value="16">Map Zoom Level 16 - Best for City</option>
<option value="15">Map Zoom Level 15</option>
<option value="14">Map Zoom Level 14</option>
<option value="13" selected>Map Zoom Level 13</option>
<option value="12">Map Zoom Level 12</option>
<option value="11">Map Zoom Level 11</option>
<option value="10">Map Zoom Level 10</option>
<option value="9">Map Zoom Level 9</option>
<option value="8">Map Zoom Level 8</option>
<option value="7">Map Zoom Level 7</option>
<option value="6">Map Zoom Level 6</option>
<option value="5">Map Zoom Level 5</option>
<option value="4">Map Zoom Level 4</option>
<option value="3">Map Zoom Level 3</option>
<option value="2">Map Zoom Level 2</option>
<option value="1">Map Zoom Level 1</option>
<option value="0">Map Zoom Level 0</option>
</select>
<input type="button" class="gllpUpdateButton button-primary" value="Update Map">
<div class="gllpMap" style="height:150px;margin-top:15px;">Google Maps</div> <p>
<input type="text" class="gllpLatitude griditem1" name="gmap_iconizer_latitude" value="41.085652"/>
<input type="text" class="gllpLongitude griditem1" name="gmap_iconizer_longitude" value="-73.85846839999999"/>
<select name="gmap_iconizer_basicmaps" class="griditem2" style="margin-top:-3px;">
<option value="ROADMAP" selected>Map Type : ROADMAP </option>
<option value="SATELLITE">Map Type : SATELLITE </option>
<option value="HYBRID">Map Type : HYBRID </option>
<option value="TERRAIN">Map Type : TERRAIN </option>
</select>
</br>
<input type="text" class="gllpwidth griditem1" name="gmap_iconizer_width" placeholder="Enter Map Width" />
<input type="text" class="gllpheight griditem1" name="gmap_iconizer_height" placeholder="Enter Map Height" />
<input type="text" class="gllpwidth griditem2" name="gmap_iconizer_saturation" placeholder="Map Saturation Level" />
</br>
<input type="text" class="gllpwidth griditem2 colorpicker" name="gmap_iconizer_hue" value="#ffffff" placeholder="Enter Map Color" />
</br>
<select name="gmap_iconizer_zoomcontrol" class="griditem1" id="">
<option value="true" selected>Map Zoom True</option>
<option value="false">Map Zoom False</option>
</select>
<select name="gmap_iconizer_zoomcontrolSize" class="griditem2" id="">
<option value="LARGE">Zoom Large</option>
<option value="SMALL" selected>Zoom Small</option>
<option value="DEFAULT">Zoom Default</option>
</select>
<select name="gmap_iconizer_zoomcontrolPosition" id="">
<option value="TOP_CENTER">TOP_CENTER</option>
<option value="TOP_LEFT" >TOP_LEFT</option>
<option value="TOP_RIGHT">TOP_RIGHT</option>
<option value="LEFT_TOP">LEFT_TOP</option>
<option value="RIGHT_TOP" selected >RIGHT_TOP</option>
<option value="LEFT_CENTER">LEFT_CENTER</option>
<option value="RIGHT_CENTER">RIGHT_CENTER</option>
<option value="LEFT_BOTTOM">LEFT_BOTTOM</option>
<option value="RIGHT_BOTTOM">RIGHT_BOTTOM</option>
<option value="BOTTOM_CENTER">BOTTOM_CENTER</option>
<option value="BOTTOM_LEFT">BOTTOM_LEFT</option>
<option value="BOTTOM_RIGHT">BOTTOM_RIGHT</option>
</select>
<select name="gmap_iconizer_maptype" class="griditem1" id="">
<option value="true" selected>Map Type Control True</option>
<option value="false">Map Type Control False</option>
</select>
<select name="gmap_iconizer_maptypecontrol_style" class="griditem2" id="">
<option value="HORIZONTAL_BAR" selected>Horizontal Bar</option>
<option value="DROPDOWN_MENU ">Dropdown Menu</option>
<option value="DEFAULT ">Default</option>
</select>
<select name="gmap_iconizer_maptype_position" id="">
<option value="TOP_CENTER">TOP_CENTER</option>
<option value="TOP_LEFT">TOP_LEFT</option>
<option value="TOP_RIGHT" selected>TOP_RIGHT</option>
<option value="LEFT_TOP">LEFT_TOP</option>
<option value="RIGHT_TOP">RIGHT_TOP</option>
<option value="LEFT_CENTER">LEFT_CENTER</option>
<option value="RIGHT_CENTER">RIGHT_CENTER</option>
<option value="LEFT_BOTTOM">LEFT_BOTTOM</option>
<option value="RIGHT_BOTTOM">RIGHT_BOTTOM</option>
<option value="BOTTOM_CENTER">BOTTOM_CENTER</option>
<option value="BOTTOM_LEFT">BOTTOM_LEFT</option>
<option value="BOTTOM_RIGHT">BOTTOM_RIGHT</option>
</select>
<select name="gmap_iconizer_pancontrol" class="griditem1" id="">
<option value="true">MapPan True</option>
<option value="false" selected>MapPan False</option>
</select>
<select name="gmap_iconizer_pan_position" class="griditem2" id="">
<option value="TOP_CENTER">TOP_CENTER</option>
<option value="TOP_LEFT" >TOP_LEFT</option>
<option value="TOP_RIGHT">TOP_RIGHT</option>
<option value="LEFT_TOP" selected>LEFT_TOP</option>
<option value="RIGHT_TOP">RIGHT_TOP</option>
<option value="LEFT_CENTER">LEFT_CENTER</option>
<option value="RIGHT_CENTER">RIGHT_CENTER</option>
<option value="LEFT_BOTTOM">LEFT_BOTTOM</option>
<option value="RIGHT_BOTTOM">RIGHT_BOTTOM</option>
<option value="BOTTOM_CENTER">BOTTOM_CENTER</option>
<option value="BOTTOM_LEFT">BOTTOM_LEFT</option>
<option value="BOTTOM_RIGHT">BOTTOM_RIGHT</option>
</select>
</br>
<select name="gmap_iconizer_streetviewcontrol" class="griditem1" id="">
<option value="true" selected>StreetView True</option>
<option value="false" >StreetView False</option>
</select>
<select name="gmap_iconizer_streetviewcontrol_position" class="griditem2" id="">
<option value="TOP_CENTER">TOP_CENTER</option>
<option value="TOP_LEFT" selected>TOP_LEFT</option>
<option value="TOP_RIGHT">TOP_RIGHT</option>
<option value="LEFT_TOP">LEFT_TOP</option>
<option value="RIGHT_TOP">RIGHT_TOP</option>
<option value="LEFT_CENTER">LEFT_CENTER</option>
<option value="RIGHT_CENTER">RIGHT_CENTER</option>
<option value="LEFT_BOTTOM">LEFT_BOTTOM</option>
<option value="RIGHT_BOTTOM">RIGHT_BOTTOM</option>
<option value="BOTTOM_CENTER">BOTTOM_CENTER</option>
<option value="BOTTOM_LEFT">BOTTOM_LEFT</option>
<option value="BOTTOM_RIGHT">BOTTOM_RIGHT</option>
</select>
</br>
<textarea id="gllpstyle" name="gmap_iconizer_containerstyle" rows="3" cols="30" placeholder="Style Your Google Map Container"></textarea>
<textarea id="gllpstyle" name="gmap_iconizer_style" rows="3" cols="30" placeholder="Style Your Content's Google Map"></textarea>
</p>
</fieldset>
</form>
<button id="transfer_to_content" class="button-primary">Include Map to Content</button>
<script type="text/javascript">
jQuery(function ($) {
    // for ie9 doesn't support debug console >>>
    if (!window.console) window.console = {};
    if (!window.console.log) window.console.log = function () { };
    // ^^^
    var GMapsLatLonPicker = (function() {
        var _self = this;
        ///////////////////////////////////////////////////////////////////////////////////////////////
        // PARAMETERS (MODIFY THIS PART) //////////////////////////////////////////////////////////////
        _self.params = {
            defLat : 0,
            defLng : 0,
            defZoom : 1,
            queryLocationNameWhenLatLngChanges: true,
            queryElevationWhenLatLngChanges: true,
            mapOptions : {
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false,
                disableDoubleClickZoom: true,
                zoomControlOptions: true,
                streetViewControl: false
            },
            strings : {
                markerText : "Drag this Marker",
                error_empty_field : "Couldn't find coordinates for this place",
                error_no_results : "Couldn't find coordinates for this place"
            }
        };
        ///////////////////////////////////////////////////////////////////////////////////////////////
        // VARIABLES USED BY THE FUNCTION (DON'T MODIFY THIS PART) ////////////////////////////////////
        _self.vars = {
            ID : null,
            LATLNG : null,
            map : null,
            marker : null,
            geocoder : null
        };
        ///////////////////////////////////////////////////////////////////////////////////////////////
        // PRIVATE FUNCTIONS FOR MANIPULATING DATA ////////////////////////////////////////////////////
        var setPosition = function(position) {
            _self.vars.marker.setPosition(position);
            _self.vars.map.panTo(position);
            $(_self.vars.cssID + ".gllpZoom").val( _self.vars.map.getZoom() );
            $(_self.vars.cssID + ".gllpLongitude").val( position.lng() );
            $(_self.vars.cssID + ".gllpLatitude").val( position.lat() );
            $(_self.vars.cssID).trigger("location_changed", $(_self.vars.cssID));
            if (_self.params.queryLocationNameWhenLatLngChanges) {
                getLocationName(position);
            }
            if (_self.params.queryElevationWhenLatLngChanges) {
                getElevation(position);
            }
        };
        // for reverse geocoding
        var getLocationName = function(position) {
            var latlng = new google.maps.LatLng(position.lat(), position.lng());
        _self.vars.geocoder.geocode({'latLng': latlng}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK && results[1]) {
                    $(_self.vars.cssID + ".gllpLocationName").val(results[1].formatted_address);
                    } else {
                    $(_self.vars.cssID + ".gllpLocationName").val("");
                }
                $(_self.vars.cssID).trigger("location_name_changed", $(_self.vars.cssID));
            });
        };
        // for getting the elevation value for a position
        var getElevation = function(position) {
            var latlng = new google.maps.LatLng(position.lat(), position.lng());
            var locations = [latlng];
            var positionalRequest = { 'locations': locations };
            _self.vars.elevator.getElevationForLocations(positionalRequest, function(results, status) {
                if (status == google.maps.ElevationStatus.OK) {
                    if (results[0]) {
                        $(_self.vars.cssID + ".gllpElevation").val( results[0].elevation.toFixed(3));
                        } else {
                        $(_self.vars.cssID + ".gllpElevation").val("");
                    }
                    } else {
                    $(_self.vars.cssID + ".gllpElevation").val("");
                }
                $(_self.vars.cssID).trigger("elevation_changed", $(_self.vars.cssID));
            });
        };
        // search function
        var performSearch = function(string, silent) {
            if (string == "") {
                if (!silent) {
                    displayError( _self.params.strings.error_empty_field );
                }
                return;
            }
            _self.vars.geocoder.geocode(
            {"address": string},
            function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    $(_self.vars.cssID + ".gllpZoom").val(11);
                    _self.vars.map.setZoom( parseInt($(_self.vars.cssID + ".gllpZoom").val()) );
                    setPosition( results[0].geometry.location );
                    } else {
                    if (!silent) {
                        displayError( _self.params.strings.error_no_results );
                    }
                }
            }
            );
        };
        // error function
        var displayError = function(message) {
            alert(message);
        };
        ///////////////////////////////////////////////////////////////////////////////////////////////
        // PUBLIC FUNCTIONS //////////////////////////////////////////////////////////////////////////
        var publicfunc = {
            // INITIALIZE MAP ON DIV //////////////////////////////////////////////////////////////////
            init : function(object) {
                if ( !$(object).attr("id") ) {
                    if ( $(object).attr("name") ) {
                        $(object).attr("id", $(object).attr("name") );
                        } else {
                        $(object).attr("id", "_MAP_" + Math.ceil(Math.random() * 10000) );
                    }
                }
                _self.vars.ID = $(object).attr("id");
                _self.vars.cssID = "#" + _self.vars.ID + " ";
                _self.params.defLat = $(_self.vars.cssID + ".gllpLatitude").val() ? $(_self.vars.cssID + ".gllpLatitude").val() : _self.params.defLat;
                _self.params.defLng = $(_self.vars.cssID + ".gllpLongitude").val() ? $(_self.vars.cssID + ".gllpLongitude").val() : _self.params.defLng;
                _self.params.defZoom = $(_self.vars.cssID + ".gllpZoom").val()  ? parseInt($(_self.vars.cssID + ".gllpZoom").val()) : _self.params.defZoom;
                _self.vars.LATLNG = new google.maps.LatLng(_self.params.defLat, _self.params.defLng);
                _self.vars.MAPOPTIONS  = _self.params.mapOptions;
                _self.vars.MAPOPTIONS.zoom  = _self.params.defZoom;
                _self.vars.MAPOPTIONS.center = _self.vars.LATLNG;
                _self.vars.map = new google.maps.Map($(_self.vars.cssID + ".gllpMap").get(0), _self.vars.MAPOPTIONS);
                _self.vars.geocoder = new google.maps.Geocoder();
                _self.vars.elevator = new google.maps.ElevationService();
                _self.vars.marker = new google.maps.Marker({
                    position: _self.vars.LATLNG,
                    map: _self.vars.map,
                    title: _self.params.strings.markerText,
                    draggable: true
                });
                // Set position on doubleclick
                google.maps.event.addListener(_self.vars.map, 'dblclick', function(event) {
                    setPosition(event.latLng);
                });
                // Set position on marker move
                google.maps.event.addListener(_self.vars.marker, 'dragend', function(event) {
                    setPosition(_self.vars.marker.position);
                });
                // Set zoom feld's value when user changes zoom on the map
                google.maps.event.addListener(_self.vars.map, 'zoom_changed', function(event) {
                    $(_self.vars.cssID + ".gllpZoom").val( _self.vars.map.getZoom() );
                    $(_self.vars.cssID).trigger("location_changed", $(_self.vars.cssID));
                });
                // Update location and zoom values based on input field's value
                $(_self.vars.cssID + ".gllpUpdateButton").bind("click", function() {
                    var lat = $(_self.vars.cssID + ".gllpLatitude").val();
                    var lng = $(_self.vars.cssID + ".gllpLongitude").val();
                    var latlng = new google.maps.LatLng(lat, lng);
                    _self.vars.map.setZoom( parseInt( $(_self.vars.cssID + ".gllpZoom").val() ) );
                    setPosition(latlng);
                });
                // Search function by search button
                $(_self.vars.cssID + ".gllpSearchButton").bind("click", function() {
                    performSearch( $(_self.vars.cssID + ".gllpSearchField").val(), false );
                });
                // Search function by gllp_perform_search listener
                $(document).bind("gllp_perform_search", function(event, object) {
                    performSearch( $(object).attr('string'), true );
                });
                // Zoom function triggered by gllp_perform_zoom listener
                $(document).bind("gllp_update_fields", function(event) {
                    var lat = $(_self.vars.cssID + ".gllpLatitude").val();
                    var lng = $(_self.vars.cssID + ".gllpLongitude").val();
                    var latlng = new google.maps.LatLng(lat, lng);
                    _self.vars.map.setZoom( parseInt( $(_self.vars.cssID + ".gllpZoom").val() ) );
                    setPosition(latlng);
                });
            }
        }
        return publicfunc;
    });
    $(document).ready( function() {
        $(".gllpLatlonPicker").each(function() {
            (new GMapsLatLonPicker()).init( $(this) );
        });
    });
    $(document).bind("location_changed", function(event, object) {
        console.log("changed: " + $(object).attr('id') );
    });
});
</script>
<style>
#TB_ajaxContent{
    color:white;
}
.gllpZoom{
    width:200px;
    margin-top:0px;
    height:28px;
}
#aes-submit{
    margin-top:5px;
}
.griditem1 {
    width:180px;
}
.griditem2 {
    width:160px;
}
.wp-picker-container{
    padding-top:10px;
}
</style>
<script type="text/javascript">
jQuery(document).ready(function($){
    $('.colorpicker').wpColorPicker();
});
jQuery('#transfer_to_content').click(function(){
    var lat = jQuery('input:text[name=gmap_iconizer_latitude]').val();
    var longi = jQuery('input:text[name=gmap_iconizer_longitude]').val();
    var zoom = jQuery('select[name="gmap_iconizer_zoom_level"] option:selected').val();
    var zoomcontrol = jQuery('select[name="gmap_iconizer_zoomcontrol"] option:selected').val();
    var zoomcontrolsize = jQuery('select[name="gmap_iconizer_zoomcontrolSize"] option:selected').val();
    var zoomcontrolposition = jQuery('select[name="gmap_iconizer_zoomcontrolPosition"] option:selected').val();
    var maptype = jQuery('select[name="gmap_iconizer_maptype"] option:selected').val();
    var maptypestyle = jQuery('select[name="gmap_iconizer_maptypecontrol_style"] option:selected').val();
    var maptypeposition = jQuery('select[name="gmap_iconizer_maptype_position"] option:selected').val();
    var pancontrol = jQuery('select[name="gmap_iconizer_pancontrol"] option:selected').val();
    var pancontrolposition = jQuery('select[name="gmap_iconizer_pan_position"] option:selected').val();
    var streetview = jQuery('select[name="gmap_iconizer_streetviewcontrol"] option:selected').val();
    var streetviewposition = jQuery('select[name="gmap_iconizer_streetviewcontrol_position"] option:selected').val();
    var basicmaptype = jQuery('select[name="gmap_iconizer_basicmaps"] option:selected').val();
    var hue = jQuery('input:text[name=gmap_iconizer_hue]').val();
    var saturation = jQuery('input:text[name=gmap_iconizer_saturation]').val();
    var width = jQuery('input:text[name=gmap_iconizer_width]').val();
    var height = jQuery('input:text[name=gmap_iconizer_height]').val();
    var style = jQuery('textarea[name="gmap_iconizer_style"]').val();
    var containerstyle = jQuery('textarea[name="gmap_iconizer_containerstyle"]').val();
    if ( width != '' ) {}
    else {
        var width = '450px';
    }
    if ( height != '' ) {}
    else {
        var height = '250px';
    }
    if ( style != '' ) {}
    else {
        var style = '';
    }
    var tummetin = "[oneclick-easy-content-gmap lat='"+lat+"' long='"+longi+"' basicmaptype='"+basicmaptype+"' hue='"+hue+"' saturation='"+saturation+"' zoom='"+zoom+"' width='"+width+"' height='"+height+"' style='"+style+"' containerstyle='"+containerstyle+"' zoomcontrol='"+zoomcontrol+"' zoomcontrolsize='"+zoomcontrolsize+"' zoomcontrolposition='"+zoomcontrolposition+"' maptype='"+maptype+"' maptypestyle='"+maptypestyle+"' maptypeposition='"+maptypeposition+"' pancontrol='"+pancontrol+"' pancontrolposition='"+pancontrolposition+"' streetview='"+streetview+"' streetviewposition='"+streetviewposition+"' ]";
    /*shortcodeblockstart+lat+shortcodeblockmid+longi+shortcodeblockzoom+zoom+shortcodeblockwidth+width+shortcodeblockheight+height+shortcodeblockstyle+shortcodeblockzoomcontrol+zoomcontrol+shortcodeblockzoomcontrolsize+zoomcontrolsize+style+shortcodeblockend;
    */
    tinyMCE.activeEditor.execCommand('mceInsertContent', false, tummetin);
    tb_remove();
})
</script>